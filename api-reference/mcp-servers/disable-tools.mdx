---
title: "Disable/Enable MCP Server Tools"
openapi: "POST /api/v1/mcp-server-tool-disabled/bulk_toggle/"
description: "Bulk disable or enable specific tools for an MCP server connection."
---

## Overview

This endpoint allows you to disable or enable specific tools for an MCP server connection. By default, all tools are enabled unless explicitly disabled. This provides granular control over which tools are available for use.

## Prerequisites

- **Valid OAuth Token** - Bearer token with `mgmt.write` scope
- **Existing Connection** - Valid MCP server connection ID
- **Tool IDs** - Valid tool identifiers to disable/enable

## Request

```bash
POST /api/v1/mcp-server-tool-disabled/bulk_toggle/
```

### Headers

| Header          | Type   | Required | Description                            |
| --------------- | ------ | -------- | -------------------------------------- |
| `Authorization` | string | Yes      | Bearer token from OAuth authentication |
| `Content-Type`  | string | Yes      | Must be `application/json`             |

### Request Body

```json
{
  "mcp_server_access": 123,
  "tool_ids": ["local_1", "external_2", "local_5"],
  "action": "disable",
  "custom_config": {
    "reason": "User preference",
    "disabled_by": "user"
  }
}
```

### Request Fields

| Field               | Type    | Required | Description                         |
| ------------------- | ------- | -------- | ----------------------------------- |
| `mcp_server_access` | integer | Yes      | The MCP server connection ID        |
| `tool_ids`          | array   | Yes      | Array of tool IDs to disable/enable |
| `action`            | string  | Yes      | Either `"disable"` or `"enable"`    |
| `custom_config`     | object  | No       | Optional configuration metadata     |

### Tool ID Formats

Tool IDs can be specified in the following formats:

- `local_{id}` - Local MCP server tool (e.g., `local_123`)
- `external_{id}` - External API endpoint tool (e.g., `external_456`)
- `{id}` - Legacy format, assumed to be local tool

## Response

### Success Response (200 OK)

#### Disable Tools Response

```json
{
  "message": "Successfully disabled 3 tools",
  "disabled_count": 3,
  "action": "disable"
}
```

#### Enable Tools Response

```json
{
  "message": "Successfully enabled 2 tools",
  "enabled_count": 2,
  "action": "enable"
}
```

### Response Fields

| Field            | Type    | Description                                   |
| ---------------- | ------- | --------------------------------------------- |
| `message`        | string  | Human-readable success message                |
| `disabled_count` | integer | Number of tools disabled (for disable action) |
| `enabled_count`  | integer | Number of tools enabled (for enable action)   |
| `action`         | string  | The action that was performed                 |

## Error Responses

### Bad Request (400)

```json
{
  "error": "Invalid tool ID format: invalid_tool_123"
}
```

### Unauthorized (401)

```json
{
  "detail": "Authentication credentials were not provided."
}
```

### Forbidden (403)

```json
{
  "detail": "You do not have permission to modify this connection."
}
```

## Examples

### Disable Multiple Tools

```bash
curl -X POST "https://api.kambrium.com/api/v1/mcp-server-tool-disabled/bulk_toggle/" \
  -H "Authorization: Bearer your_oauth_token" \
  -H "Content-Type: application/json" \
  -d '{
    "mcp_server_access": 123,
    "tool_ids": ["local_1", "local_3", "external_2"],
    "action": "disable",
    "custom_config": {
      "reason": "Security policy",
      "disabled_by": "admin"
    }
  }'
```

### Enable Specific Tools

```bash
curl -X POST "https://api.kambrium.com/api/v1/mcp-server-tool-disabled/bulk_toggle/" \
  -H "Authorization: Bearer your_oauth_token" \
  -H "Content-Type: application/json" \
  -d '{
    "mcp_server_access": 123,
    "tool_ids": ["local_1", "external_2"],
    "action": "enable"
  }'
```

---

## Get Disabled Tools

You can also retrieve the list of currently disabled tools for a connection.

### Request

```bash
GET /api/v1/mcp-server-tool-disabled/disabled_tools/?mcp_server_access_id=123
```

### Response

```json
{
  "disabled_tools": [
    {
      "id": 1,
      "tool_id": "1",
      "tool_source": "local",
      "tool_name": "get_sensitive_data",
      "custom_config": {
        "reason": "Security policy",
        "disabled_by": "admin"
      },
      "created_at": "2025-06-27T10:30:00Z"
    }
  ],
  "count": 1
}
```

---

## Get Tool Access Summary

Get a comprehensive summary of tool access for a connection.

### Request

```bash
GET /api/v1/mcp-server-tool-disabled/access_summary/?mcp_server_access_id=123
```

### Response

```json
{
  "total_tools": 25,
  "enabled_tools": 23,
  "disabled_tools": 2,
  "local_tools": {
    "total": 15,
    "enabled": 13,
    "disabled": 2
  },
  "external_tools": {
    "total": 10,
    "enabled": 10,
    "disabled": 0
  }
}
```

## Implementation Notes

### Tool Source Types

- **Local Tools** - Tools defined in the MCP server itself
- **External Tools** - Tools from external API endpoints/integrations

### Access Control

- Tools are disabled per connection, not globally
- Users can only disable tools for their own connections
- Administrators can disable tools for any connection

### Database Design

- Uses a "disabled-only" approach - tools are enabled by default
- Only disabled tools are stored in the database
- Enabling a tool removes it from the disabled list

### Performance

- Bulk operations are optimized for performance
- Database transactions ensure consistency
- Changes take effect immediately

## Related Endpoints

- [Get MCP Server Tools](/api-reference/mcp-servers/tools) - List all available tools
- [Get Enabled Tools](/api-reference/mcp-servers/enabled-tools) - List currently enabled tools
- [Update MCP Server Connection](/api-reference/mcp-servers/update) - Update connection settings
- [Get MCP Server Connection](/api-reference/mcp-servers/get) - Get connection details
