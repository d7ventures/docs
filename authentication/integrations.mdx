---
title: "SaaS Tool Authentication"
description: "How users authenticate with external SaaS providers"
---

# SaaS Tool Authentication

When creating MCP server connections, users provide authentication credentials for external SaaS tools (Pipedrive, Gmail, etc.) through two methods.

## API Key Authentication

**Default method** - Users provide their SaaS API keys directly:

### Via Web Interface

Users paste their API key into a secure form in the web UI when creating an MCP server connection.

### Via Management API

```json
{
  "mcp_server": "pipedrive",
  "access_type": "write",
  "api_key": "user-provided-api-key"
}
```

**Process:**

1. User obtains API key from SaaS provider
2. User provides key through web UI or Management API
3. Key is securely stored and validated
4. MCP server uses key for SaaS API calls

## OAuth Authentication

**For SaaS providers supporting OAuth** - Users complete OAuth flows:

### Via Web Interface

Users click "Connect to [SaaS provider]" button, which initiates the SaaS provider's OAuth flow.

### Via Management API

```json
{
  "mcp_server": "pipedrive",
  "access_type": "write",
  "auth_method": "oauth"
}
```

**Process:**

1. User initiates OAuth flow through platform
2. User redirected to SaaS provider's consent page
3. User grants permissions to platform
4. Platform receives and securely stores OAuth tokens
5. MCP server uses OAuth tokens for SaaS API calls

## Supported SaaS Providers

### Pipedrive

- **API Key:** Supported via account settings
- **OAuth:** Supported with `["base"]` scopes
- **Authorization URL:** `https://oauth.pipedrive.com/oauth/authorize`

### Gmail

- **API Key:** Not supported (OAuth only)
- **OAuth:** Supported with PKCE requirement
- **Authorization URL:** `https://accounts.google.com/o/oauth2/v2/auth`

## Schema Validation

**Conflict Prevention:** The Management API enforces that `api_key` and `auth_method: "oauth"` cannot be used together (returns 422 error).

### Valid Requests

```json
// API Key method (default)
{
  "mcp_server": "pipedrive",
  "api_key": "user-key"
}

// OAuth method
{
  "mcp_server": "pipedrive",
  "auth_method": "oauth"
}
```

### Invalid Request

```json
// This returns 422 error
{
  "mcp_server": "pipedrive",
  "auth_method": "oauth",
  "api_key": "should-not-be-provided"
}
```

## How MCP Servers Use Credentials

Once authenticated, MCP servers use the stored credentials to make API calls to SaaS providers on behalf of users. The MCP server handles all SaaS API interactions - users only need to provide initial authentication.
