---
title: "White-Label OAuth"
description: "Embed branded OAuth flows in your application"
---

White-label OAuth allows you to embed Kambrium's authentication flows into your application with your own branding, creating a seamless user experience when connecting to SaaS tools.

## Overview

Instead of redirecting users to generic OAuth screens, white-label OAuth maintains your application's look and feel throughout the entire authentication process.

### Benefits

- **Consistent Branding:** Your logos, colors, and messaging throughout OAuth flows
- **Increased Trust:** Users stay within your familiar interface
- **Professional Experience:** No jarring redirects to third-party screens
- **Higher Conversion:** Reduced abandonment during authentication

## Implementation Approaches

### Embedded OAuth Flow

**Best for:** Applications that need complete control over the user experience

Your application handles the entire OAuth flow while leveraging Kambrium's infrastructure:

```javascript
// 1. Initiate OAuth flow
const oauthSession = await kambrium.oauth.initiate({
  provider: "pipedrive",
  userId: "user123",
  branding: {
    logoUrl: "https://yourapp.com/logo.png",
    primaryColor: "#0066cc",
    companyName: "Your Company",
  },
  redirectUrl: "https://yourapp.com/auth/callback",
});

// 2. Redirect user to branded OAuth URL
window.location.href = oauthSession.authUrl;
```

### Server-Side Integration

**Best for:** Applications that need backend control over authentication

Your backend manages OAuth flows and user sessions:

```python
# 1. Create MCP server with OAuth
server = kambrium_client.mcp_servers.create({
    "provider": "pipedrive",
    "user_id": "user123",
    "auth_method": "oauth",
    "white_label": {
        "brand_name": "Your Company",
        "logo_url": "https://yourapp.com/logo.png",
        "primary_color": "#0066cc"
    }
})

# 2. Get branded OAuth URL
oauth_url = server.oauth_url  # Contains your branding parameters
```

## Token Exchange for Delegated Access

For applications that need to act on behalf of multiple users (multi-tenant SaaS platforms), Kambrium supports OAuth 2.1 Token Exchange (RFC 8693).

### Use Case

Your application serves multiple customers, and each customer needs to connect their own SaaS accounts. You need to:

- Authenticate as your application
- Request delegated access for specific customers
- Maintain proper attribution for billing and security

### Implementation

```python
# 1. Authenticate your application
app_token = kambrium_client.auth.get_token({
    "grant_type": "client_credentials",
    "client_id": "your_app_id",
    "client_secret": "your_app_secret"
})

# 2. Request delegated token for end user
delegated_token = kambrium_client.auth.exchange_token({
    "grant_type": "urn:ietf:params:oauth:grant-type:token-exchange",
    "subject_token": app_token.access_token,
    "subject_token_type": "urn:ietf:params:oauth:token-type:access_token",
    "requested_token_type": "urn:ietf:params:oauth:token-type:access_token",
    "audience": "mcp-server",
    "resource": f"user:{end_user_id}"
})

# 3. Use delegated token for MCP operations
mcp_client = MCPClient(
    server_url=server.url,
    auth_token=delegated_token.access_token
)
```

### Token Claims

Delegated tokens contain claims identifying both parties:

```json
{
  "sub": "end_user_id", // The end user
  "azp": "your_application_id", // Your application (authorized party)
  "aud": "mcp-server", // Target audience
  "scope": "mcp.tools.read mcp.resources.read",
  "exp": 1640995200, // Short-lived (1 hour)
  "iat": 1640991600
}
```

## Branding Configuration

### Visual Customization

Configure your brand elements for OAuth flows:

```json
{
  "white_label": {
    "brand_name": "Your Company",
    "logo_url": "https://yourapp.com/logo.png",
    "primary_color": "#0066cc",
    "secondary_color": "#f0f0f0",
    "background_color": "#ffffff",
    "text_color": "#333333",
    "button_color": "#0066cc",
    "button_text_color": "#ffffff"
  }
}
```

### Custom Messaging

Customize consent screen text and instructions:

```json
{
  "custom_messaging": {
    "consent_title": "Connect your Pipedrive account",
    "consent_description": "Allow {brand_name} to access your Pipedrive data",
    "permission_explanation": "This enables AI-powered insights for your sales data",
    "privacy_policy_url": "https://yourapp.com/privacy",
    "terms_of_service_url": "https://yourapp.com/terms"
  }
}
```

## Security Considerations

### Token Lifecycle

- **Application tokens:** Long-lived (24 hours), used for token exchange
- **Delegated tokens:** Short-lived (1 hour), used for MCP operations
- **OAuth tokens:** Provider-specific expiration, managed by Kambrium

### Audit Trail

All operations include proper attribution:

- Billing attributed to your application
- Usage attributed to specific end users
- Security logs track both application and user context

### Best Practices

- Always use HTTPS for OAuth flows
- Validate redirect URLs to prevent attacks
- Store credentials securely using Kambrium's infrastructure
- Implement proper error handling for expired tokens
- Use the shortest-lived tokens appropriate for your use case

## Error Handling

### Common Error Scenarios

```python
try:
    server = kambrium_client.mcp_servers.create({
        "provider": "pipedrive",
        "user_id": "user123",
        "auth_method": "oauth"
    })
except KambriumAuthError as e:
    if e.code == "invalid_branding":
        # Handle invalid branding configuration
        logger.error(f"Branding error: {e.message}")
    elif e.code == "oauth_failed":
        # Handle OAuth flow failure
        logger.error(f"OAuth failed: {e.message}")
    else:
        # Handle other authentication errors
        logger.error(f"Auth error: {e.message}")
```

### OAuth Flow Error Recovery

```javascript
// Handle OAuth callback with error checking
app.get("/auth/callback", (req, res) => {
  const { code, error, state } = req.query;

  if (error) {
    // Handle OAuth errors (user denied, invalid request, etc.)
    return res.redirect(`/auth/error?reason=${error}`);
  }

  if (!code) {
    // Handle missing authorization code
    return res.redirect("/auth/error?reason=missing_code");
  }

  // Process successful OAuth callback
  processOAuthCallback(code, state, res);
});
```

## Integration Examples

### React Application

```jsx
import { useState } from "react";
import { KambriumClient } from "@kambrium/client";

function SaaSConnection({ userId }) {
  const [isConnecting, setIsConnecting] = useState(false);
  const [connectionStatus, setConnectionStatus] = useState("disconnected");

  const connectPipedrive = async () => {
    setIsConnecting(true);

    try {
      const server = await kambrium.mcp_servers.create({
        provider: "pipedrive",
        user_id: userId,
        auth_method: "oauth",
        white_label: {
          brand_name: "Your App",
          logo_url: "/your-logo.png",
          primary_color: "#0066cc",
        },
      });

      // Redirect to branded OAuth flow
      window.location.href = server.oauth_url;
    } catch (error) {
      console.error("Connection failed:", error);
      setConnectionStatus("error");
    } finally {
      setIsConnecting(false);
    }
  };

  return (
    <div className="saas-connection">
      <h3>Connect Pipedrive</h3>
      <button
        onClick={connectPipedrive}
        disabled={isConnecting}
        className="connect-button"
      >
        {isConnecting ? "Connecting..." : "Connect Account"}
      </button>
    </div>
  );
}
```

### Express.js Backend

```javascript
const express = require("express");
const { KambriumClient } = require("@kambrium/client");

const app = express();
const kambrium = new KambriumClient({ apiKey: process.env.KAMBRIUM_API_KEY });

// Initiate OAuth flow
app.post("/api/connect/:provider", async (req, res) => {
  try {
    const { provider } = req.params;
    const { userId } = req.body;

    const server = await kambrium.mcp_servers.create({
      provider,
      user_id: userId,
      auth_method: "oauth",
      white_label: {
        brand_name: "Your Application",
        logo_url: "https://yourapp.com/logo.png",
        primary_color: "#0066cc",
      },
      redirect_url: "https://yourapp.com/auth/callback",
    });

    res.json({
      oauth_url: server.oauth_url,
      server_id: server.id,
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Handle OAuth callback
app.get("/auth/callback", async (req, res) => {
  const { code, state, error } = req.query;

  if (error) {
    return res.redirect(`/dashboard?error=${error}`);
  }

  try {
    // Complete OAuth flow
    await kambrium.oauth.complete({
      code,
      state,
    });

    res.redirect("/dashboard?connected=true");
  } catch (error) {
    res.redirect(`/dashboard?error=oauth_failed`);
  }
});
```

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Management API"
    icon="server"
    href="/api-reference/management-api"
  >
    Complete API reference for programmatic integration
  </Card>
  <Card
    title="MCP Server Authentication"
    icon="shield-check"
    href="/authentication/mcp-server"
  >
    Learn about MCP protocol authentication
  </Card>
  <Card
    title="Integration Examples"
    icon="code"
    href="/examples/oauth-integration"
  >
    Practical implementation examples and code samples
  </Card>
  <Card
    title="Authentication Overview"
    icon="key"
    href="/authentication/introduction"
  >
    Understanding Kambrium's authentication architecture
  </Card>
</CardGroup>{" "}
