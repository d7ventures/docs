---
title: "Management API Authentication"
description: "Authentication and lifecycle management of MCP Server connections"
---

## Overview

The **Management API** is the top-level administrative interface for managing MCP Server connections. Built with FastAPI, it sits above individual MCP Servers and handles their complete lifecycle management.

<Info>
All Management API operations require OAuth 2.1 authentication with JWT tokens in the `Authorization: Bearer <token>` header.
</Info>

---

## Core Operations

The Management API provides five essential operations for MCP Server lifecycle management:

<CardGroup cols={2}>
  <Card title="List Available Integrations" icon="list">
    Get all available MCP Server integrations that can be created
  </Card>

  <Card title="Create MCP Server" icon="plus">
    Create new MCP Server connections to SaaS tools
  </Card>

  <Card title="List Your Connections" icon="server">
    Get all your existing MCP Server connections
  </Card>

  <Card title="Delete Connections" icon="trash">
    Remove MCP Server connections you no longer need
  </Card>

  <Card title="Edit Connections" icon="edit">
    Modify configuration of existing MCP Server connections
  </Card>

  <Card title="OAuth Authorization" icon="key">
    Initiate and manage OAuth flows for SaaS tool connections
  </Card>
</CardGroup>

---

## Authentication Methods

The Management API supports two OAuth 2.1 compliant authentication methods:

### Personal Access Tokens (PATs)

**Best for:** Developer convenience, scripting, CI/CD pipelines

PATs provide the simple "copy-paste" experience of traditional API keys while remaining fully OAuth 2.1 compliant JWT tokens.

**Characteristics:**

- Long-lived JWT tokens that do not expire
- Generated through the web UI
- No token refresh logic required
- Immediate usability

**How to create:**

1. Log into the Kambrium web interface
2. Navigate to API settings
3. Generate a Personal Access Token
4. Copy the token and store it securely

<Warning>
  PATs are displayed only once during creation. Store them securely.
</Warning>

### OAuth 2.1 Client Credentials

**Best for:** Production server-to-server applications

Standard OAuth 2.1 implementation for applications requiring short-lived, automatically refreshing tokens.

**Characteristics:**

- Generate `client_id` and `client_secret` in web UI
- Request short-lived, expiring access tokens programmatically
- Automatic token refresh capability
- Industry standard security practices

**How to create:**

1. Log into the Kambrium web interface
2. Create OAuth application credentials
3. Implement Client Credentials Grant flow in your application
4. Use credentials to request access tokens from auth server

---

## Using Personal Access Tokens

### Basic Usage

<CodeGroup>
```bash cURL
curl -H "Authorization: Bearer YOUR_PAT_TOKEN" \
  https://api.kambrium.com/v1/mcp-servers
```

```python Python
import requests

# Store PAT securely
token = "YOUR_PAT_TOKEN"
headers = {"Authorization": f"Bearer {token}"}

# List your MCP servers
response = requests.get(
    "https://api.kambrium.com/v1/mcp-servers",
    headers=headers
)
servers = response.json()
```

```javascript JavaScript
const token = "YOUR_PAT_TOKEN";
const headers = { Authorization: `Bearer ${token}` };

// List your MCP servers
const response = await fetch("https://api.kambrium.com/v1/mcp-servers", {
  headers,
});
const servers = await response.json();
```

</CodeGroup>

### Creating MCP Server Connections

<CodeGroup>
```python API Key Connection
# Create MCP server with API key
response = requests.post(
    "https://api.kambrium.com/v1/mcp-servers",
    headers={"Authorization": f"Bearer {token}"},
    json={
        "integration_type": "salesforce",
        "name": "My Salesforce Connection",
        "auth_method": "api_key",
        "credentials": {
            "api_key": "user_provided_api_key",
            "instance_url": "https://company.salesforce.com"
        }
    }
)
```

```python OAuth Connection
# Create MCP server with OAuth
response = requests.post(
    "https://api.kambrium.com/v1/mcp-servers",
    headers={"Authorization": f"Bearer {token}"},
    json={
        "integration_type": "slack",
        "name": "Team Slack",
        "auth_method": "oauth"
    }
)

# Response includes OAuth authorization URL
auth_url = response.json()["auth_url"]
print(f"Direct user to: {auth_url}")
```

</CodeGroup>

---

## Using OAuth 2.1 Client Credentials

### Step 1: Request Access Token

<CodeGroup>
```bash cURL
curl -X POST https://auth.kambrium.com/oauth/token \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=client_credentials" \
  -d "client_id=YOUR_CLIENT_ID" \
  -d "client_secret=YOUR_CLIENT_SECRET"
```

```python Python
import requests

def get_access_token(client_id, client_secret):
    response = requests.post(
        "https://auth.kambrium.com/oauth/token",
        data={
            "grant_type": "client_credentials",
            "client_id": client_id,
            "client_secret": client_secret
        }
    )
    return response.json()

token_data = get_access_token("your_client_id", "your_client_secret")
access_token = token_data["access_token"]
```

```javascript JavaScript
async function getAccessToken(clientId, clientSecret) {
  const response = await fetch("https://auth.kambrium.com/oauth/token", {
    method: "POST",
    headers: {
      "Content-Type": "application/x-www-form-urlencoded",
    },
    body: new URLSearchParams({
      grant_type: "client_credentials",
      client_id: clientId,
      client_secret: clientSecret,
    }),
  });

  return await response.json();
}
```

</CodeGroup>

### Step 2: Use Access Token

<CodeGroup>
```python Managing MCP Servers
headers = {"Authorization": f"Bearer {access_token}"}

# List available integrations

integrations = requests.get(
"https://api.kambrium.com/v1/integrations",
headers=headers
).json()

# Create new MCP server

new_server = requests.post(
"https://api.kambrium.com/v1/mcp-servers",
headers=headers,
json={
"integration_type": "notion",
"name": "Team Notion",
"auth_method": "oauth"
}
).json()

# Get existing servers

my_servers = requests.get(
"https://api.kambrium.com/v1/mcp-servers",
headers=headers
).json()

````
</CodeGroup>

### Step 3: Handle Token Refresh

<CodeGroup>
```python Automatic Token Management
from datetime import datetime, timedelta

class ManagementAPIClient:
    def __init__(self, client_id, client_secret):
        self.client_id = client_id
        self.client_secret = client_secret
        self.token = None
        self.expires_at = None

    def get_valid_token(self):
        if not self.token or datetime.now() >= self.expires_at:
            self._refresh_token()
        return self.token

    def _refresh_token(self):
        token_data = get_access_token(self.client_id, self.client_secret)
        self.token = token_data["access_token"]
        expires_in = token_data["expires_in"]
        self.expires_at = datetime.now() + timedelta(seconds=expires_in - 60)

    def create_mcp_server(self, integration_type, name, auth_method, **kwargs):
        headers = {"Authorization": f"Bearer {self.get_valid_token()}"}
        return requests.post(
            "https://api.kambrium.com/v1/mcp-servers",
            headers=headers,
            json={
                "integration_type": integration_type,
                "name": name,
                "auth_method": auth_method,
                **kwargs
            }
        ).json()
````

</CodeGroup>

---

## SaaS Tool Connection Methods

### API Key Connections

For SaaS tools that support API key authentication:

<CodeGroup>
```python Direct API Key
# User provides their SaaS tool API key directly
server_config = {
    "integration_type": "salesforce",
    "name": "Production Salesforce", 
    "auth_method": "api_key",
    "credentials": {
        "api_key": "user_api_key_from_salesforce",
        "instance_url": "https://company.salesforce.com"
    }
}

response = requests.post(
"https://api.kambrium.com/v1/mcp-servers",
headers={"Authorization": f"Bearer {token}"},
json=server_config
)

````
</CodeGroup>

### OAuth Connections

For SaaS tools requiring OAuth authorization:

<CodeGroup>
```python OAuth Flow Initiation
# Create MCP server - returns OAuth URL
response = requests.post(
    "https://api.kambrium.com/v1/mcp-servers",
    headers={"Authorization": f"Bearer {token}"},
    json={
        "integration_type": "slack",
        "name": "Company Slack",
        "auth_method": "oauth"
    }
)

server_info = response.json()
auth_url = server_info["auth_url"]

# Direct user to complete OAuth flow
print(f"Please visit: {auth_url}")

# Check completion status
server_id = server_info["id"]
while True:
    status_response = requests.get(
        f"https://api.kambrium.com/v1/mcp-servers/{server_id}",
        headers={"Authorization": f"Bearer {token}"}
    )

    status = status_response.json()["status"]
    if status == "active":
        print("OAuth completed successfully!")
        break
    elif status == "failed":
        print("OAuth authorization failed")
        break
````

</CodeGroup>

---

## White Label OAuth Implementation

For applications serving their own users, Kambrium provides white label OAuth flows:

<AccordionGroup>
  <Accordion title="Token Exchange for User Delegation" icon="arrows-exchange">
    Uses OAuth 2.1 Token Exchange (RFC 8693) for secure delegation:
    
    ```python
    # Exchange your Management API token for user-specific access
    response = requests.post(
        "https://auth.kambrium.com/oauth/token",
        data={
            "grant_type": "urn:ietf:params:oauth:grant-type:token-exchange",
            "subject_token": your_management_token,
            "subject_token_type": "urn:ietf:params:oauth:token-type:access_token",
            "requested_token_type": "urn:ietf:params:oauth:token-type:access_token",
            "audience": f"user:{end_user_id}"
        }
    )
    
    delegated_token = response.json()["access_token"]
    ```
    
    This provides:
    - Proper attribution for billing and auditing
    - Security through delegation rather than impersonation
    - Clean separation between your app and end users
  </Accordion>
  
  <Accordion title="Custom OAuth Flows" icon="cog">
    Direct your users to OAuth URLs that maintain your branding:
    
    ```python
    # Create MCP server with custom OAuth branding
    response = requests.post(
        "https://api.kambrium.com/v1/mcp-servers",
        headers={"Authorization": f"Bearer {token}"},
        json={
            "integration_type": "notion",
            "name": "User Notion Access",
            "auth_method": "oauth",
            "oauth_config": {
                "redirect_uri": "https://yourapp.com/oauth/callback",
                "branding": {
                    "app_name": "Your App Name",
                    "logo_url": "https://yourapp.com/logo.png"
                }
            }
        }
    )
    ```
  </Accordion>
</AccordionGroup>

---

## Error Handling

### Common Response Codes

| Status Code | Description      | Common Causes                   |
| ----------- | ---------------- | ------------------------------- |
| `200`       | Success          | Request completed successfully  |
| `201`       | Created          | MCP server created successfully |
| `401`       | Unauthorized     | Invalid or expired token        |
| `403`       | Forbidden        | Insufficient permissions        |
| `404`       | Not Found        | MCP server not found            |
| `422`       | Validation Error | Invalid request parameters      |

### Example Error Response

```json
{
  "error": "validation_error",
  "message": "Invalid integration_type",
  "details": {
    "field": "integration_type",
    "provided": "invalid_type",
    "allowed": ["salesforce", "slack", "notion", "github"]
  }
}
```

---

## Rate Limits and Usage

<Info>
  **Rate Limits:** - Management API: 100 requests per minute per token - OAuth
  token requests: 10 requests per minute per client - Burst allowance: 2x rate
  limit for short periods
</Info>

### Monitoring Usage

<CodeGroup>
```python Usage Tracking
def check_api_usage(token):
    response = requests.get(
        "https://api.kambrium.com/v1/usage",
        headers={"Authorization": f"Bearer {token}"}
    )
    
    usage = response.json()
    print(f"Requests this minute: {usage['current_minute']}/100")
    print(f"Requests this hour: {usage['current_hour']}")
    print(f"MCP servers created: {usage['servers_created']}")
```
</CodeGroup>

---

## Next Steps

<CardGroup cols={2}>
  <Card
    title="MCP Server Access"
    href="/authentication/mcp-server"
    icon="server"
  >
    Learn how to connect to and use your created MCP servers
  </Card>

  <Card
    title="SaaS Integration Guide"
    href="/authentication/integrations"
    icon="plug"
  >
    Detailed setup for specific SaaS tools
  </Card>

  <Card title="Complete Tutorial" href="/guides/mcp-setup" icon="rocket">
    End-to-end setup walkthrough
  </Card>

  <Card
    title="Web Dashboard"
    href="https://app.kambrium.com"
    icon="external-link"
  >
    Visual interface for managing connections
  </Card>
</CardGroup>

<Note>
  The Management API is your primary interface for MCP server lifecycle
  management. All operations follow OAuth 2.1 standards for secure, scalable
  access.
</Note>{" "}
