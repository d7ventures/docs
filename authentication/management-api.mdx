---
title: "Management API Authentication"
description: "Authentication methods and security for the Kambrium Management API"
---

## Overview

The **Management API** is the top-level administrative interface for managing MCP Server connections. All Management API operations require authentication with JWT tokens containing `mgmt.*` scopes for secure access.

<Info>
**Base URL:** `https://your-domain.com/api/v1`

**Required Header:** `Authorization: Bearer <your_token>`

**Token Context:** Tokens must have `"context": "management_api"`

</Info>

---

## Authentication Methods

The Management API supports two authentication methods, both using JWT tokens:

<CardGroup cols={2}>
  <Card title="OAuth 2.1 Client Credentials" icon="shield-check">
    **Best for:** Production applications, server-to-server communication
    **Process:** Cognito client credentials flow with automatic token refresh
    **Scopes:** `mgmt.read`, `mgmt.write`, `mgmt.admin`
    **Token Type:** Short-lived JWT with automatic refresh
  </Card>

  <Card title="Personal Access Tokens (PATs)" icon="key">
    **Best for:** Development, scripting, CI/CD pipelines
    **Process:** Long-lived JWT tokens created via web interface
    **Scopes:** `mgmt.read`, `mgmt.write`, `mgmt.admin` (configurable)
    **Token Type:** Self-contained JWT with extended expiry
  </Card>
</CardGroup>

---

## OAuth 2.1 Client Credentials Flow

### Step 1: Get OAuth Credentials

Contact your administrator to obtain your `client_id` and `client_secret` for OAuth 2.1 authentication.

### Step 2: Request Access Token

<CodeGroup>
```http Token Request
POST /oauth2/token
Host: us-east-1clpqjbygz.auth.us-east-1.amazoncognito.com
Content-Type: application/x-www-form-urlencoded
Authorization: Basic <base64(client_id:client_secret)>

grant_type=client_credentials

````

```bash cURL Example
curl -X POST "https://us-east-1clpqjbygz.auth.us-east-1.amazoncognito.com/oauth2/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Authorization: Basic $(echo -n 'client_id:client_secret' | base64)" \
  -d "grant_type=client_credentials"
````

```python Python Example
import httpx
import base64

async def get_management_token(client_id: str, client_secret: str):
    credentials = f"{client_id}:{client_secret}"
    credentials_b64 = base64.b64encode(credentials.encode()).decode()

    headers = {
        "Authorization": f"Basic {credentials_b64}",
        "Content-Type": "application/x-www-form-urlencoded"
    }

    data = {"grant_type": "client_credentials"}

    async with httpx.AsyncClient() as client:
        response = await client.post(
            "https://us-east-1clpqjbygz.auth.us-east-1.amazoncognito.com/oauth2/token",
            headers=headers,
            data=data
        )
        return response.json()["access_token"]
```

</CodeGroup>

### Step 3: Token Response

```json
{
  "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "mgmt.read mgmt.write"
}
```

---

## Personal Access Tokens (PATs)

### Creating PATs

PATs are created through your web interface and provide long-lived access:

1. **Web Interface:** Navigate to Settings â†’ API Access
2. **Generate Token:** Select scopes and create PAT
3. **Copy Token:** Save the JWT token securely (one-time display)
4. **Use Token:** Include in Authorization header

### PAT Token Structure

PATs are JWT tokens with specific claims for Management API access:

```json
{
  "iss": "https://cognito-idp.us-east-1.amazonaws.com/us-east-1_CLpqjbYgz",
  "aud": "default-m2m-resource-server-z958ha",
  "sub": "6",
  "client_id": "pat_NlAKvulkVFJC1GQM-H4ZrHex-8fNoknL",
  "scopes": ["mgmt.read", "mgmt.write", "mgmt.admin"],
  "token_use": "access",
  "token_type": "pat",
  "context": "management_api",
  "iat": 1750792552,
  "exp": 1750892552
}
```

---

## Required Scopes

Management API endpoints require specific scopes for access:

<AccordionGroup>
  <Accordion title="mgmt.read" icon="eye">
    **Endpoints:**
    - `GET /api/v1/mcp-servers` - List user's MCP server connections
    - `GET /api/v1/mcp-servers/available` - List available integrations
    - `GET /api/v1/mcp-servers/{id}` - Get specific connection details
    
    **Access:** Read-only operations for connection management
  </Accordion>

{" "}
<Accordion title="mgmt.write" icon="pencil">
  **Endpoints:** - `POST /api/v1/mcp-servers` - Create new MCP server
  connections - `PUT /api/v1/mcp-servers/{id}` - Update existing connections -
  `DELETE /api/v1/mcp-servers/{id}` - Delete connections **Access:** Full CRUD
  operations for connection management
</Accordion>

  <Accordion title="mgmt.admin" icon="crown">
    **Endpoints:**
    - `GET /api/v1/mcp-servers/{id}/tools` - Access connection tools
    - `POST /api/v1/mcp-servers/{id}/tools/{tool}/execute` - Execute tools
    - Administrative operations across all connections
    
    **Access:** Full administrative control including tools execution
  </Accordion>
</AccordionGroup>

---

## Authentication Examples

### Making Authenticated Requests

<CodeGroup>
```http HTTP Request
GET /api/v1/mcp-servers
Host: your-domain.com
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json
```

```javascript JavaScript/Node.js
const response = await fetch("https://your-domain.com/api/v1/mcp-servers", {
  headers: {
    Authorization: `Bearer ${accessToken}`,
    "Content-Type": "application/json",
  },
});

const connections = await response.json();
```

```python Python
import httpx

headers = {
    "Authorization": f"Bearer {access_token}",
    "Content-Type": "application/json"
}

async with httpx.AsyncClient() as client:
    response = await client.get(
        "https://your-domain.com/api/v1/mcp-servers",
        headers=headers
    )
    connections = response.json()
```

</CodeGroup>

---

## Error Handling

### Authentication Errors

<AccordionGroup>
  <Accordion title="401 Unauthorized" icon="x">
    **Missing or Invalid Token**
    ```json
    {
      "error": "invalid_token",
      "detail": "Token validation failed"
    }
    ```
    **Solution:** Check token format and ensure Bearer prefix
  </Accordion>

  <Accordion title="403 Forbidden" icon="shield-x">
    **Insufficient Scopes**
    ```json
    {
      "error": "insufficient_scope", 
      "detail": "Token lacks required mgmt.write scope"
    }
    ```
    **Solution:** Ensure token has required scopes for endpoint
  </Accordion>

  <Accordion title="422 Validation Error" icon="alert-triangle">
    **Invalid Request Format**
    ```json
    {
      "detail": [
        {
          "field": "api_key",
          "error": "api_key not allowed with auth_method=oauth"
        }
      ]
    }
    ```
    **Solution:** Check request schema validation requirements
  </Accordion>
</AccordionGroup>

---

## Security Best Practices

### Token Security

- **Store Securely:** Never expose tokens in client-side code
- **Use HTTPS:** All requests must use TLS 1.3
- **Token Rotation:** Regularly rotate PATs and OAuth credentials
- **Scope Minimization:** Use least-privilege principle for scopes

### Request Security

- **Validate Responses:** Check HTTP status codes and error messages
- **Rate Limiting:** Respect API rate limits (100 requests/minute)
- **Audit Logging:** Monitor authentication events and failures

---

## Health Check

Verify API availability and authentication status:

```http
GET /api/v1/health
```

**Response:**

```json
{
  "success": true,
  "data": {
    "status": "healthy",
    "timestamp": "2024-01-20T15:30:00Z",
    "services": {
      "management_api": "operational",
      "authentication": "operational"
    }
  },
  "message": "Management API is healthy"
}
```

<Note>
  This endpoint does not require authentication and can be used to verify
  service availability.
</Note>

---

## Next Steps

<CardGroup cols={2}>
  <Card
    title="MCP Server Access"
    href="/authentication/mcp-server"
    icon="server"
  >
    Learn how to authenticate with MCP servers for runtime access
  </Card>

{" "}
<Card title="SaaS Integration" href="/authentication/integrations" icon="plug">
  Understand SaaS tool authentication and OAuth flows
</Card>

{" "}
<Card title="Complete Tutorial" href="/guides/mcp-setup" icon="rocket">
  End-to-end setup walkthrough
</Card>

  <Card title="API Reference" href="/api-reference/introduction" icon="book">
    Explore the complete API documentation
  </Card>
</CardGroup>

<Note>
  Management API authentication provides secure access to MCP server lifecycle
  management using industry-standard OAuth 2.1 protocols.
</Note>
